<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
>
<head th:fragment="header">
  <meta charset="UTF-8">
  <title>Typing App</title>
  <link crossorigin="anonymous"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
        rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark" th:fragment="navbar">
  <div class="container-fluid" >
    <a class="navbar-brand  fs-3" th:href="@{/}">Typing App</a>
    <button aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-bs-target="#navbarSupportedContent" data-bs-toggle="collapse" type="button">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent" >
      <ul class="navbar-nav position-absolute top-50 end-0 translate-middle-y  me-3">
        <li class="nav-item fs-4" sec:authorize="isAnonymous()">
          <a aria-current="page" class="nav-link active" th:href="@{/register}" >Register</a>
        </li>
        <li class="nav-item  fs-4" sec:authorize="isAnonymous()">
          <a aria-current="page"  class="nav-link active" th:href="@{/login}" >Login</a>
        </li>
        <li class="nav-item  fs-4 mt-3" sec:authorize="isAuthenticated()">
          <p class="navbar-text" > Hi,  <span th:text="${name}"  ></span>    </p>
        </li>
        <li class="nav-item fs-4 mt-3 ms-3" sec:authorize="isAuthenticated()">
          <a aria-current="page" id="history"  class="nav-link active" th:href="@{/history}" >  History</a>
        </li>
        <li class="nav-item fs-4 mt-3 ms-3" sec:authorize="isAuthenticated()">
          <a aria-current="page" id="menu" class="nav-link active"  th:href="@{/menu}" >Menu</a>
        </li>
        <li class="nav-item fs-4 mt-3 ms-3" sec:authorize="isAuthenticated()">
          <a aria-current="page"  class="nav-link active" th:href="@{/logout}" >  Logout</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
<script>
  window.onload = function newLink() {
    var url =window.location.href;
    if(url === 'http://localhost:8080/menu' ||
            url === 'http://localhost:8080/menu?stop' ||
            url === 'http://localhost:8080/menu?success' ||
            url === 'http://localhost:8080/menu?continue') {
      document.getElementById('menu').style.display = "none";
    }
    if(url === 'http://localhost:8080/history' ||
            url === 'http://localhost:8080/history?continue') {
      document.getElementById('history').style.display = "none";
    }
  }
</script>
</body>
</html>